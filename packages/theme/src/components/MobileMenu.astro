---
import { Modal, ModalCloser, ModalPanel } from "@rxdrag/website-lib";
import { Icon } from "@rxdrag/website-lib-core";
---

<Modal openableKey="mobile-menu">
  <ModalCloser
    class:list={[
      "fixed inset-0 bg-black/30 backdrop-blur-md z-20",
      "opacity-0 pointer-events-none open:pointer-events-auto",
    ]}
    whileOpenable={{
      open: {
        to: {
          opacity: 1,
          display: "block",
        },
      },
      close: {
        to: {
          opacity: 0,
          display: "none",
        },
      },
    }}
  />
  <ModalPanel
    class:list={[
      "light fixed right-0 top-0 max-w-md space-y-4 bg-surface-card pt-0 px-2 w-full h-full overflow-auto z-50",
      "pointer-events-none open:pointer-events-auto",
      "transform  opacity-0",
    ]}
    whileOpenable={{
      initial: {
        opacity: 0,
        x: "100%",
      },
      open: {
        to: {
          opacity: 1,
          x: 0,
        },
        duration: 0.3,
        ease: "easeOut",
      },
      close: {
        to: {
          opacity: 0,
          x: "100%",
        },
        duration: 0.15,
        ease: "easeIn",
      },
    }}
  >
    <ModalCloser
      class:list={[
        "absolute right-2 top-2 rounded-md text-gray-400",
        "hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",
        "cursor-pointer p-2 tranform translate-x-1",
      ]}
    >
      <Icon client:load icon="iconoir:cancel" className="size-8" />
    </ModalCloser>
    <slot />
  </ModalPanel>
</Modal>
