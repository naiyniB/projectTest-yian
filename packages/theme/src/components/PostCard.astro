---
import dayjs from "dayjs";
import { Link } from "@rxdrag/website-lib";

interface Props {
  post?: TPost;
  detailTitle?: string;
}
const { post, detailTitle } = Astro.props;---

<article class="w-full relative isolate flex flex-col gap-8 pb-8">
  <div class="w-full flex flex-col">
    <Link type="post" to={post?.slug}>
      <div class="relative aspect-[16/6]">
        <img
          class="min-h-20 absolute inset-0 h-full w-full bg-gray-50 object-cover"
          src={post?.cover?.resize}
          alt={post?.title || "Post image"}
        />
      </div>
    </Link>
    <div class="relative gap-x-4 text-sm pt-4">
      {
        post?.author && (
          <div class="absolute top-0 left-4 -translate-y-1/2">
            <div class="relative flex items-center gap-x-4">
              <img
                class="h-20 w-20 rounded-full bg-gray-50"
                src={post?.author?.avatar?.thumbnail}
                alt={post?.author?.name || "Author image"}
              />
            </div>
          </div>
        )
      }
      <div class="relative w-full flex justify-between">
        {
          post?.author?.name && (
            <div class={post?.author?.avatar?.thumbnail ? "ml-28" : ""}>
              <Link
                type="user"
                to={post?.author?.id || ""}
                class="hover:text-sky-600"
              >
                {post?.author?.name}
              </Link>
            </div>
          )
        }
        {dayjs(post?.createdAt)?.format("MMMM D, YYYY")}
      </div>
    </div>
  </div>
  <div>
    <div class="group relative max-w-xl">
      <Link type="post" to={post?.slug}>
        <h3
          class="mt-3 text-lg font-semibold leading-6 text-gray-900 hover:text-sky-600"
        >
          {post?.title}
        </h3>
      </Link>
      <p class="mt-5 text-md leading-6 text-gray-600">
        {post?.description}
      </p>
    </div>
  </div>
  <div>
    <Link
      class="rounded-md bg-white px-4 py-2.5 text-sm text-sky-600 shadow-sm ring-1 ring-inset ring-sky-300 hover:bg-sky-50"
      type="post"
      to={post?.slug}
    >
      {detailTitle || "Read this post"}
    </Link>
  </div>
</article>
